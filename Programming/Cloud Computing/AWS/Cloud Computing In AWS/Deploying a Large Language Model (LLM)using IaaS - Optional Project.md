[[LLM]] [[Healthcare]] [[Open Source]]

Healthcare documentation has grown increasingly complex and time-consuming. Medical professionals now spend significant portions of their workday reviewing lengthy clinical reports to extract essential patient information. This application uses generative AI technology to create concise summaries of doctor reports.

The system identifies and extracts key clinical findings, diagnoses, treatment plans, and follow-up recommendations from comprehensive medical documentation.

LLMs require special consideration on the hardware that will be used. 

typically high-performance GPUs or specialized AI accelerators with sufficient VRAM to accommodate model parameters.

Memory requirements extend beyond just the model size, as additional overhead is needed for tokenization, attention mechanisms, and intermediate computations. Cost optimization becomes essential, requiring strategies like batch processing, model quantization, or distillation to balance performance against infrastructure expenses. Scaling considerations also play a vital role, as organizations must decide whether to implement horizontal scaling with multiple smaller instances or vertical scaling with fewer, more powerful machines, each approach offering different benefits for throughput, redundancy, and cost management.

## Google FLAN
Fine-tuned LAnguage Net - models developed by google research.

Flan-T5 is a well known version of these models. built on the T5 architecture (text-to-text transfer transformer). These models are open source.

![[Pasted image 20250813193818.png]]

## Project Steps
1. Create an EC2 instance using the below specifications AMI – Ubuntu 22.04 LTS Size – M7i-flex.large Root Storage – 30GB 
2. Download the application Python scripts to the EC2 instance 
3. Setup the environment to execute the LLM 
4. Execute the Python program 
5. Observe the output generated by the LLM


script to get the summarizer
```
wget https://d6opu47qoi4ee.cloudfront.net/genAI/ccaws/flan/summarizer.zip
```

### Inside the EC2 instance for the LLM: 
we installed pip, unzip and we downloaded the application summarizer zip with the command above. 

we also installed virtualenv with pip3 and created a virtual environment for our app 

we also activated the virtual environment 

we install transformers torch accelerate 

then we run the app_tester.py script

I believe this app tester will download the llm 

larger instance will give you more horse power and run everything faster

after running the python script:
The execution of the program will result in the creation of a folder called summaries containing the output of the program which is a JSON file. This file can be opened to observe the generated output by using the below commands

we change to the folder created by the script, then we do:

`cat summary_20250815_230032_740795.json`

cat - stands for concatenate, but it basically prints the text content of a file

and the result is printed 

## Running the app:
(venv) ubuntu@ip-172-31-35-44:~/summarizer$ python3 app_tester.py 
Reading input file: visit_report2.txt
Generating summary for 1 documents
Using device: cpu
Loading model from local storage: models/flan-t5-large
Template file not found at prompts/medical_templates.json. Using default templates.
Model initialization complete
Main summarizer model called



some notes:

```
(venv) ubuntu@ip-172-31-35-44:~/summarizer/summaries$ cat summary_20250815_230747_278371.json 
{
  "request": {
    "documents": [
      {
        "content": "Background: Diffuse alveolar hemorrhage (DAH) is a potentially life-threatening condition which can present with hemoptysis, diffuse alveolar infiltrates, anemia, and hypoxic respiratory failure. Antisynthetase syndrome (AS) is a rare autoimmune disorder most often characterized by nonerosive arthritis, proximal muscle weakness with elevated muscle enzymes, Raynaud\u2019s phenomenon, hyperkeratosis of the digits (mechanic\u2019s hands), and interstitial lung disease. According to large population studies, AS has an annual incidence of 0.56 per 100,000 persons and prevalence of 9 per 100,000. The most common autoantibody is anti-aminoacyl-transfer RNA synthetase for histidine (anti-Jo-1) with a reported prevalence of 20%\u201330%, whereas anti-Pl-7 (for threonine) accounts for less than 5% of all autoimmune myositis. Specific myositis autoantibodies determine clinical phenotype. PL-7 is characterized by interstitial lung disease, myositis, and arthritis. Autoimmune myositis, specifically AS, is a rare cause of DAH. Herein, we describe the first reported case of PL-7-associated AS with DAH.\n\nReport: A 41-year-old female presented with worsening shortness of breath and hemoptysis. Laboratory studies included a hemoglobin of 10.5\u2009g/dL, mildly elevated liver enzymes, and a creatine phosphokinase (CPK) of nearly 4000\u2009U/L. CT of the chest showed diffuse ground glass opacities bilaterally. Serial aliquots of the bronchoalveolar lavage (BAL) fluid revealed progressively hemorrhagic return and histopathologic analysis consistent with DAH. Other concurrent causes of DAH were ruled out.\n\nAlthough rare, AS should be considered a cause of DAH, particularly in patients presenting with symptoms of muscle weakness and arthritis or with evidence of mechanic\u2019s hands.",
        "docType": "clinical_note",
        "metadata": {
          "file_name": "visit_report2.txt"
        }
      }
    ],
    "focus_areas": [
      "diagnosis",
      "medications"
    ]
  },
  "result": "{\"summary\": \"The first case of PL-7-associated antisynthetase syndrome with diffuse alveolar hemorrhage.\", \"confidenceScore\": 0.8160192966461182}",
  "timestamp": "20250815_230747"
```


```
(venv) ubuntu@ip-172-31-35-44:~/summarizer$ python3 app_tester.py 
Reading input file: visit_report1.txt
Generating summary for 1 documents
Using device: cpu
Downloading model from Hugging Face Hub: google/flan-t5-large
tokenizer_config.json: 2.54kB [00:00, 13.9MB/s]
spiece.model: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 792k/792k [00:00<00:00, 3.37MB/s]
tokenizer.json: 2.42MB [00:00, 162MB/s]
special_tokens_map.json: 2.20kB [00:00, 16.0MB/s]
config.json: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 662/662 [00:00<00:00, 6.94MB/s]
model.safetensors: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 3.13G/3.13G [00:39<00:00, 78.7MB/s]
generation_config.json: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 147/147 [00:00<00:00, 1.33MB/s]
Saving model to local storage: models/flan-t5-large
Template file not found at prompts/medical_templates.json. Using default templates.
Model initialization complete
Main summarizer model called
Summary received successfully, creating summary file...
Done! The summary file is summaries/summary_20250815_230032_740795.json
```

![[Pasted image 20250815182418.png]]

![[Pasted image 20250815182455.png]]