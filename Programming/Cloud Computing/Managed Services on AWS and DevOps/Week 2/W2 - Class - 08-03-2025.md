[[Serverless]] [[Lambda Functions]] [[RAG]] [[Network Interface]] [[Virtualization]]

AWS Serverless services 
Event Driven Architecture 

Serverless is not just for Lambda 

Serverless is about availability, autoscaling, resilience. You don't worry about maintaining server

S3 is also serverless 

**is EC2 serverless?** - No, EC2 provides servers that you manage 

## Lambda use case
LB -> Web -> App -> DB (OLTP) -> Batch updates -> S3/Datalake (Raw) -> Power BI

the above pipeline is missing an important factor, where do you transform the data to be analytics ready, for that you can use a lambda function, like so:

LB -> Web -> App -> DB (OLTP) -> Batch updates -> S3/Datalake (Raw) -> **ETL Lambda Function** -> Redshift <- Power BI

## Compute AWS 

*As an architect you have option, but you have to think which one's the best for your application*

EMR (Big data processing service)

EC2 

Containers
- ECS (EC2 ; Fargate)
- EKS (EC2 ; Fargate)

Lambda

Fargate - Running container orchestration 

Which is the best cost optimized service? <- Question for exam 

*Batch is ran in a nightly basis <- based on this, how can you cost optimize. In the above example, we were running a batch job, for this you don't need an entire server to 'massage' the data. You can just deploy a lambda function. - these are things you have to think about*

We can also do real time data processing as well 

Chat bots in web pages - *Lambda + RAG, the lambda function can hit an AI API and grab an answer for the query*  

## Event Driven Programming
This is a type of programming that can be found in lambda functions: *x happens, y is triggered*. An example of this is: when a file is dropped into a S3 bucket, then run a lambda function

### Data Plane
*Data Plane* -> The actions lambda performs 

## Network Interface for Lambda Function
Lambda functions create a network interface and all the function execution/interactions happen through the network interface 

the network interface is created within the subnet you choose - this makes the architecture more secure.

## Zero Trust 
IAM roles (identity perimeter) + VPC (network perimeter) + Encryption (KMS/CMK)


## Lambda Event Source 
The event source is the trigger - something inside an AWS service happens/changes and this triggers lambda 

S3 -> when there's a put operation -> send the metadata (of the file) to lambda -> lambda takes a look at it -> lambda processes the file based on the metadata that was sent 

*Recursive invocation* -> use different S3 buckets, if not you go into an infinite loop 

## Where are lambda functions executed - AWS Firecracker
There are not idle servers waiting for lambda functions - this does not make economic sense. 

*execute within milliseconds* - AWS does not know when Lambda is going to execute, there are millions of customers with millions of lambda functions

**To solve this AWS creates a temporary micro VM that can execute a lambda - This is called Firecracker**
- deployed in less than 125 milliseconds (ms) - data from 2018, maybe its faster today 

This firecracker has the bare minimum specs to run a lambda function 

The network interface card mentioned above (created by the lambda function) is attached to this *firecracker instance*




--- 
Sources
https://aws.amazon.com/serverless/
https://aws.amazon.com/lambda/
https://aws.amazon.com/blogs/aws/firecracker-lightweight-virtualization-for-serverless-computing/